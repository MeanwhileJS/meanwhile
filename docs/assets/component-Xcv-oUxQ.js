import{j as c}from"./jsx-runtime-DBEcOq3S.js";import{r as s}from"./index-DtJulBIN.js";import{c as I}from"./utils-B06rK7pa.js";import{M as L,u as b,P as N,a as $,L as D,d as j}from"./motion-nEuxSAi1.js";import{c as P}from"./createLucideIcon-uFt_cLfz.js";/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=P("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=P("CircleDashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]]);class K extends s.Component{getSnapshotBeforeUpdate(o){const e=this.props.childRef.current;if(e&&o.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=e.offsetHeight||0,i.width=e.offsetWidth||0,i.top=e.offsetTop,i.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function T({children:t,isPresent:o}){const e=s.useId(),i=s.useRef(null),f=s.useRef({width:0,height:0,top:0,left:0}),{nonce:x}=s.useContext(L);return s.useInsertionEffect(()=>{const{width:h,height:n,top:u,left:y}=f.current;if(o||!i.current||!h||!n)return;i.current.dataset.motionPopId=e;const r=document.createElement("style");return x&&(r.nonce=x),document.head.appendChild(r),r.sheet&&r.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${n}px !important;
            top: ${u}px !important;
            left: ${y}px !important;
          }
        `),()=>{document.head.removeChild(r)}},[o]),c.jsx(K,{isPresent:o,childRef:i,sizeRef:f,children:s.cloneElement(t,{ref:i})})}const U=({children:t,initial:o,isPresent:e,onExitComplete:i,custom:f,presenceAffectsLayout:x,mode:h})=>{const n=b(F),u=s.useId(),y=s.useMemo(()=>({id:u,initial:o,isPresent:e,custom:f,onExitComplete:r=>{n.set(r,!0);for(const d of n.values())if(!d)return;i&&i()},register:r=>(n.set(r,!1),()=>n.delete(r))}),x?[Math.random()]:[e]);return s.useMemo(()=>{n.forEach((r,d)=>n.set(d,!1))},[e]),s.useEffect(()=>{!e&&!n.size&&i&&i()},[e]),h==="popLayout"&&(t=c.jsx(T,{isPresent:e,children:t})),c.jsx(N.Provider,{value:y,children:t})};function F(){return new Map}const C=t=>t.key||"";function E(t){const o=[];return s.Children.forEach(t,e=>{s.isValidElement(e)&&o.push(e)}),o}const G=({children:t,exitBeforeEnter:o,custom:e,initial:i=!0,onExitComplete:f,presenceAffectsLayout:x=!0,mode:h="sync"})=>{const n=s.useMemo(()=>E(t),[t]),u=n.map(C),y=s.useRef(!0),r=s.useRef(n),d=b(()=>new Map),[S,z]=s.useState(n),[p,M]=s.useState(n);$(()=>{y.current=!1,r.current=n;for(let l=0;l<p.length;l++){const a=C(p[l]);u.includes(a)?d.delete(a):d.get(a)!==!0&&d.set(a,!1)}},[p,u.length,u.join("-")]);const g=[];if(n!==S){let l=[...n];for(let a=0;a<p.length;a++){const m=p[a],k=C(m);u.includes(k)||(l.splice(a,0,m),g.push(m))}h==="wait"&&g.length&&(l=g),M(E(l)),z(n);return}const{forceRender:w}=s.useContext(D);return c.jsx(c.Fragment,{children:p.map(l=>{const a=C(l),m=n===p||u.includes(a),k=()=>{if(d.has(a))d.set(a,!0);else return;let v=!0;d.forEach(A=>{A||(v=!1)}),v&&(w==null||w(),M(r.current),f&&f())};return c.jsx(U,{isPresent:m,initial:!y.current||i?void 0:!1,custom:m?void 0:e,presenceAffectsLayout:x,mode:h,onExitComplete:m?void 0:k,children:l},a)})})},R=async t=>new Promise(o=>setTimeout(o,t));function O(){const[t,o]=s.useState(),e=!t||t==="Add to cart",i=async()=>{e&&(o("loading"),await R(1500),o("Added to cart"),await R(1500),o("Add to cart"))};return c.jsx("button",{onClick:i,disabled:!e,className:"group relative h-10 min-w-40 overflow-hidden rounded-md bg-teal-500 px-6 text-sm font-semibold text-white transition-colors duration-300 hover:bg-teal-600",children:c.jsx(G,{mode:"wait",initial:!1,children:c.jsxs(j.span,{initial:{opacity:0,y:-15},animate:{opacity:1,y:0},exit:{opacity:0,y:15},transition:{duration:.075},className:I("flex items-center justify-center gap-1"),children:[t==="Added to cart"&&c.jsx(j.span,{className:"h-fit w-fit",initial:{scale:0},animate:{scale:1},transition:{delay:.075,type:"spring"},children:c.jsx(B,{className:"h-4 w-4 fill-white stroke-teal-500 group-hover:stroke-teal-600"})}),t=="loading"?c.jsx(q,{className:"h-4 w-4 animate-spin"}):t??"Add to cart"]},t)})})}export{O as S};
